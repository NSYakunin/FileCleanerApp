# FileCleanerApp

## Что это такое?

Консольное приложение на C#, предназначенное для очистки таблицы файлов (`File`) и файловой системы от неиспользуемых файлов, на которые нет ссылок из других таблиц БД.

## Основной функционал

- Проверяет таблицу `File` на наличие ссылок в других таблицах.
- Удаляет ненужные записи и сами файлы с диска.
- Записывает все действия (включая ошибки) в лог-файл.
- Отправляет сформированный лог-файл на email администратора.

## Архитектура и слои проекта

Проект реализован в соответствии с принципами SOLID и разбит на следующие слои:

- **Core**: Основные классы (FileRecord), интерфейсы (ILogger, IDatabaseRepository), бизнес-логика (FileCleanerService).
- **Data**: Реализация доступа к данным (DatabaseRepository), поддерживает MS SQL и PostgreSQL.
- **Email**: Отправка логов по SMTP.
- **Console**: Консольный интерфейс, настройка подключения к БД, и логирование.

## Как использовать?

1. Создать таблицы в БД (`File` и таблицы со ссылками).
2. Указать корректные SMTP настройки (`EmailService.cs`).
3. Запустить консольное приложение.
4. Выбрать тип базы данных или вручную ввести строку подключения.

## Пример таблиц БД:

```sql
CREATE TABLE [File] (
  Id INT PRIMARY KEY,
  Path NVARCHAR(MAX) NOT NULL
);

CREATE TABLE LinkedTable (
  Id INT PRIMARY KEY,
  FileId INT FOREIGN KEY REFERENCES [File](Id)
);
